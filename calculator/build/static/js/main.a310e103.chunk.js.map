{"version":3,"sources":["components/calculator/btnConfig.js","components/calculator/Calculator.jsx","App.js","index.js"],"names":["BTN_ACTIONS","ADD","THEME","CALC","DELETE","btns","display","action","class","Calculator","btnsRef","useRef","expRef","useState","expression","setExpression","useEffect","Array","from","current","querySelectorAll","forEach","e","style","height","offsetWidth","btnClick","item","expDiv","document","body","classList","toggle","addAnimSpan","oper","parentNode","querySelector","innerHTML","trim","length","remove","cloneNode","appendChild","transform","offsetHeight","res","eval","toString","setTimeout","Math","floor","console","log","content","span","createElement","opacity","width","className","ref","map","index","onClick","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a310e103.chunk.js","sourcesContent":["export const BTN_ACTIONS = {\n    ADD: 'ADD',\n    THEME: 'THEME',\n    CALC: 'CALC',\n    DELETE: 'DELETE'\n}\n\nexport const btns = [\n    {\n        display: 'C',\n        action: BTN_ACTIONS.DELETE,\n        class: 'btn__op'\n    },\n    {\n        display: '(',\n        action: BTN_ACTIONS.ADD,\n        class: 'btn__op'\n    },\n    {\n        display: ')',\n        action: BTN_ACTIONS.ADD,\n        class: 'btn__op'\n    },\n    {\n        display: '/',\n        action: BTN_ACTIONS.ADD,\n        class: 'btn__op'\n    },\n    {\n        display: '7',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '8',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '9',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: 'x',\n        action: BTN_ACTIONS.ADD,\n        class: 'btn__op'\n    },\n    {\n        display: '4',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '5',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '6',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '-',\n        action: BTN_ACTIONS.ADD,\n        class: 'btn__op'\n    },\n    {\n        display: '1',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '2',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '3',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '+',\n        action: BTN_ACTIONS.ADD,\n        class: 'btn__op'\n    },\n    {\n        display: '☀️',\n        action: BTN_ACTIONS.THEME,\n        class: ''\n    },\n    {\n        display: '0',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '.',\n        action: BTN_ACTIONS.ADD,\n        class: ''\n    },\n    {\n        display: '=',\n        action: BTN_ACTIONS.CALC,\n        class: 'btn__op'\n    }\n];","import React, { useRef, useEffect, useState } from 'react';\n\nimport './calculator.css';\n\nimport { btns, BTN_ACTIONS } from './btnConfig';\n\nconst Calculator = () => {\n\n    const btnsRef = useRef(null);\n    const expRef = useRef(null);\n\n    const [expression, setExpression] = useState('');\n\n    useEffect(() => {\n        const btns = Array.from(btnsRef.current.querySelectorAll('button'));\n        btns.forEach(e => e.style.height = e.offsetWidth + 'px');\n    }, []);\n\n    const btnClick = (item) => {\n        const expDiv = expRef.current;\n\n        if (item.action === BTN_ACTIONS.THEME) document.body.classList.toggle('dark');\n\n        if (item.action === BTN_ACTIONS.ADD) {\n            addAnimSpan(item.display);\n\n            const oper = item.display !== 'x' ? item.display : '*';\n            setExpression(expression + oper);\n        }\n\n        if (item.action === BTN_ACTIONS.DELETE) {\n            expDiv.parentNode.querySelector('div:last-child').innerHTML = '';\n            expDiv.innerHTML = '';\n\n            setExpression('');\n        }\n\n        if (item.action === BTN_ACTIONS.CALC) {\n            if (expression.trim().length <= 0) return;\n\n            expDiv.parentNode.querySelector('div:last-child').remove();\n\n            const cloneNode = expDiv.cloneNode(true);\n            expDiv.parentNode.appendChild(cloneNode);\n\n            const transform = `translateY(${-(expDiv.offsetHeight + 10) + 'px'}) scale(0.4)`;\n\n            try {\n                let res = eval(expression);\n\n                setExpression(res.toString());\n                setTimeout(() => {\n                    cloneNode.style.transform = transform;\n                    expDiv.innerHTML = '';\n                    addAnimSpan(Math.floor(res * 100000000) / 100000000);\n                }, 200);\n            } catch {\n                setTimeout(() => {\n                    cloneNode.style.transform = transform;\n                    cloneNode.innerHTML = 'Syntax err';\n                }, 200);\n            } finally {\n                console.log('calc complete');\n            }\n        }\n    }\n\n    const addAnimSpan = (content) => {\n        const expDiv = expRef.current;\n        const span = document.createElement('span');\n\n        span.innerHTML = content;\n        span.style.opacity = '0';\n        expDiv.appendChild(span);\n\n        const width = span.offsetWidth + 'px';\n        span.style.width = '0';\n\n        setTimeout(() => {\n            span.style.opacity = '1';\n            span.style.width = width;\n        }, 100);\n    }\n\n    return (\n        <div className=\"calculator\">\n            <div className=\"calculator__result\">\n                <div ref={expRef} className=\"calculator__result__exp\"></div>\n                <div className=\"calculator__result__exp\"></div>\n            </div>\n            <div ref={btnsRef} className=\"calculator__btns\">\n                {\n                    btns.map((item, index) => (\n                        <button\n                            key={index}\n                            className={item.class}\n                            onClick={() => btnClick(item)}\n                        >\n                            {item.display}\n                        </button>\n                    ))\n                }\n            </div>\n        </div>\n    );\n}\n\nexport default Calculator;\n","import './App.css';\n\nimport Calculator from './components/calculator/Calculator';\n\nfunction App() {\n    return (\n        <div>\n            <Calculator/>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}